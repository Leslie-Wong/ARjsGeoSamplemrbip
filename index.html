<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
        <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    </head>

    <body style="margin: 0; overflow: hidden;">
        <div class="info" style="
            z-index: 9999999999;
            position: absolute;
            top: 10px;
            left: 10px;
        }
        ">test17</div>
        <a-scene
            embedded
            loading-screen="enabled: false;"
            vr-mode-ui="enabled: false"
            cursor='rayOrigin: mouse'
            raycaster='near: 0; far: 50000'
            arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false;'
            renderer='logarithmicDepthBuffer: true;antialias: true; alpha: true'
        >
                <a-asset-item
                    id="animated-asset"
                    src="assets/asset.gltf"
                ></a-asset-item>
            </a-assets>

                <a-entity
                    class="obj-1"
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="1.005410100359194308 1.005410100359194308 1.005410100359194308"
                    gps-entity-place="latitude: 22.3133100; longitude: 114.2189100;"
                    clicker
                ></a-entity>

                <a-entity
                    class="obj-2"
                    clicker
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005410100359194308 0.005410100359194308 0.005410100359194308"
                    gps-entity-place="latitude: 22.313423; longitude: 114.218932;"
                ></a-entity>
                <a-entity
                    class="obj-2"
                    clicker
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005410100359194308 0.005410100359194308 0.005410100359194308"
                    gps-entity-place="latitude: 22.313284; longitude: 114.218953;"
                ></a-entity>
                <a-entity
                    class="obj-2"
                    clicker
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005410100359194308 0.005410100359194308 0.005410100359194308"
                    gps-entity-place="latitude: 22.3134776610991; longitude: 114.21909430995585;"
                ></a-entity>
                <a-entity
                    class="obj-2"
                    clicker
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005410100359194308 0.005410100359194308 0.005410100359194308"
                    gps-entity-place="latitude: 22.31337013523229; longitude: 114.21922305598856;"
                ></a-entity>
                <a-entity
                    class="obj-2"
                    clicker
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005410100359194308 0.005410100359194308 0.005410100359194308"
                    gps-entity-place="latitude: 22.313203056309714; longitude: 114.21905675902964;"
                ></a-entity>
                <a-entity
                    class="obj-2"
                    clicker
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005410100359194308 0.005410100359194308 0.005410100359194308"
                    gps-entity-place="latitude: 22.313308928084204; longitude: 114.21922305598856;"
                ></a-entity>
                <a-entity
                    class="obj-2"
                    clicker
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005410100359194308 0.005410100359194308 0.005410100359194308"
                    gps-entity-place="latitude: 22.31325599224485; longitude: 114.2191962338984;"
                ></a-entity>
                <a-entity
                    class="obj-2"
                    clicker
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005410100359194308 0.005410100359194308 0.005410100359194308"
                    gps-entity-place="latitude: 22.313203056309714; longitude: 114.2192123271525;"
                ></a-entity>
                <a-entity
                    class="obj-2"
                    clicker
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005410100359194308 0.005410100359194308 0.005410100359194308"
                    gps-entity-place="latitude: 22.313452847433233; longitude: 114.21876708045603;"
                ></a-entity>
                <a-entity
                    class="obj-2"
                    clicker
                    look-at="[gps-camera]"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset"
                    scale="0.005410100359194308 0.005410100359194308 0.005410100359194308"
                    gps-entity-place="latitude: 22.313394948912862; longitude: 114.21933570876719;"
                ></a-entity>

            <a-camera gps-camera rotation-reader></a-camera>
        </a-scene>
    </body>
    <script>
        AFRAME.registerComponent("clicker", {
        init: function() {
          this.myFunction = function(e) {
            console.log(e,"hi");
            e.target.remove();
          };

          this.el.addEventListener("click", this.myFunction);
        },

        remove: function() {
          this.el.removeEventListener("click", this.myFunction);
        }
      });
        
        const entity = document.querySelector(".info");
        const obj1 = document.querySelector('.obj-1');
        const obj2 = document.querySelector('.obj-2');
        obj1.addEventListener("click",e => {
            e.target
        });
        var isSet = false;
        window.setInterval(function(){
            navigator.geolocation.getCurrentPosition((position) => {
                let lat = position.coords.latitude;
                let long = position.coords.longitude;
                
                entity.innerText = "latitude: " + lat + "  longitude: " + long;
                if(!isSet){
                    
                    obj1.setAttribute('gps-entity-place', {
                        latitude: lat + 0.0001,
                        longitude: long + 0.0001,
                    });

                    obj2.setAttribute('gps-entity-place', {
                        latitude: lat + 0.0001,
                        longitude: long + 0.0001,
                    });
                    // isSet = true;
                    entity.innerText = "<br>latitude: " + lat + "<br>longitude: " + long +
                        "<br>obj latitude: " + obj1.getAttribute('gps-entity-place').latitude + "<br>obj longitude: " + obj1.getAttribute('gps-entity-place').longitude;
                }
              });
        }, 5000);
    </script>
</html>

